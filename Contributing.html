<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://robostack.github.io/Contributing.html><link rel=prev href=humble.html><link rel=icon href=assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.1.7"><title>Contributing - RoboStack</title><link rel=stylesheet href=assets/stylesheets/main.ded33207.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#contributing class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=RoboStack class="md-header__button md-logo" aria-label=RoboStack data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> RoboStack </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Contributing </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> </form> <div class=md-header__source> <a href=https://github.com/RoboStack/robostack.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=RoboStack class="md-nav__button md-logo" aria-label=RoboStack data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> RoboStack </label> <div class=md-nav__source> <a href=https://github.com/RoboStack/robostack.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=GettingStarted.html class=md-nav__link> Getting Started </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> Available Packages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Available Packages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=noetic.html class=md-nav__link> ROS1 Noetic </a> </li> <li class=md-nav__item> <a href=foxy.html class=md-nav__link> ROS2 Foxy </a> </li> <li class=md-nav__item> <a href=galactic.html class=md-nav__link> ROS2 Galactic </a> </li> <li class=md-nav__item> <a href=humble.html class=md-nav__link> ROS2 Humble </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Support <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Support </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/RoboStack/robostack.github.io/issues/new class=md-nav__link> Create an Issue (docs) </a> </li> <li class=md-nav__item> <a href=https://github.com/RoboStack/ros-noetic/issues/new class=md-nav__link> Create an Issue (ROS Noetic) </a> </li> <li class=md-nav__item> <a href=https://github.com/RoboStack/ros-foxy/issues/new class=md-nav__link> Create an Issue (ROS2 Foxy) </a> </li> <li class=md-nav__item> <a href=https://github.com/RoboStack/ros-galactic/issues/new class=md-nav__link> Create an Issue (ROS2 Galactic) </a> </li> <li class=md-nav__item> <a href=https://github.com/RoboStack/ros-humble/issues/new class=md-nav__link> Create an Issue (ROS2 Humble) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=Contributing.html class="md-nav__link md-nav__link--active"> Contributing </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=contributing>Contributing</h1> <p>Many thanks for taking the time to read this and for contributing to RoboStack!</p> <p>This project is in early stages and we are looking for contributors to help it grow. The developers are on <a href=https://gitter.im/RoboStack/Lobby>gitter</a> where we discuss steps forward.</p> <p>We welcome all kinds of contribution -- code or non-code -- and value them highly. We pledge to treat everyones contribution fairly and with respect and we are here to help awesome pull requests over the finish line.</p> <p>Please note we have a code of conduct, and follow it in all your interactions with the project.</p> <p>We follow the <a href=https://numfocus.org/code-of-conduct>NumFOCUS code of conduct</a>.</p> <h1 id=adding-new-packages-via-pull-requests>Adding new packages via pull requests</h1> <p>You can open a pull request that will get build automatically in our CI.</p> <p>An example can be found <a href=https://github.com/RoboStack/ros-noetic/pull/44>here</a>. Simply add the required packages to the <code>vinca_*.yaml</code> files, where the * indicates the desired platform (linux_64, osx, win or linux_aarch64). Ideally, try to add packages to all of these platforms.</p> <p>Sometimes, it may be required to patch the packages. An example of how to do so can be found in <a href=https://github.com/RoboStack/ros-noetic/pull/32>this PR</a>.</p> <h1 id=testing-changes-locally>Testing changes locally</h1> <ol> <li>Create a new conda environment and add the conda-forge and robostack channels: <div class=highlight><pre><span></span><code># For ROS2:
conda create -n robostackenv python=3.10
# For ROS1:
conda create -n robostackenv python=3.9

# For both ROS1+2
conda activate robostackenv
conda config --remove channels defaults
conda config --add channels conda-forge
conda config --add channels robostack-staging
</code></pre></div></li> <li>Install some dependencies: <code>mamba install pip conda-build anaconda-client mamba conda catkin_pkg ruamel_yaml rosdistro empy networkx requests boa</code></li> <li>Install vinca: <code>pip install git+https://github.com/RoboStack/vinca.git@master --no-deps</code></li> <li>Clone one of our repos: <code>git clone https://github.com/RoboStack/ros-noetic.git</code> (or: <code>git clone https://github.com/RoboStack/ros-humble.git</code>)</li> <li><code>cd ros-noetic</code> / <code>cd ros-humble</code></li> <li><code>cp vinca_linux_64.yaml vinca.yaml</code> (replace with your platform as necessary)</li> <li>Modify <code>vinca.yaml</code> as you please, e.g. add new packages to be built.</li> <li>Run vinca to generate the recipe by executing <code>vinca --multiple</code>; the recipes will be located in the <code>recipes</code> folder</li> <li>Build the recipe using boa: <code>boa build recipes -m ./.ci_support/conda_forge_pinnings.yaml -m ./conda_build_config.yaml</code></li> </ol> <h1 id=how-does-it-work>How does it work?</h1> <ul> <li>The <code>vinca.yaml</code> file specifies which packages should be built. </li> <li>Add the desired package under <code>packages_select_by_deps</code>. This will automatically pull in all dependencies of that package, too.</li> <li>Note that all packages that are already build in one of the channels listed under <code>skip_existing</code> will be skipped. You can also add your local channel to that list by e.g. adding <code>/home/ubuntu/miniconda3/conda-bld/linux-64/repodata.json</code>. </li> <li>If you want to manually skip packages, you can list them under <code>packages_skip_by_deps</code>.</li> <li>If you set <code>skip_all_deps</code> to <code>True</code>, you will only build packages listed under <code>packages_select_by_deps</code> but none of their dependencies.</li> <li>The <code>packages_remove_from_deps</code> list allows you to never build packages, even if they are listed as dependencies of other packages. We use it for e.g. the stage simulator which is not available in conda-forge, but is listed as one of the dependencies of the ros-simulator metapackage.</li> <li>If you want to manually rebuild a package that already exists, you need to comment out the channels listed under <code>skip_existing</code>. You probably want to set <code>skip_all_deps: true</code>, otherwise all dependencies will be rebuilt in this case.</li> <li>If the package does not build successfully out of the box, you might need to patch it. To do so, create a new file <code>ros-$ROSDISTRO-$PACKAGENAME.patch</code> in the <code>patch</code> directory (replace <code>$PACKAGENAME</code> with the name of the package, and replace any underscores with hyphens; and replace <code>$ROSDISTRO</code> with "noetic" or "galactic"). You can also use platform specifiers to only apply the patch on a specific platform, e.g. <code>ros-$ROSDISTRO-$PACKAGENAME.win.patch</code>.</li> <li>The <code>robostack.yaml</code> and <code>packages-ignore.yaml</code> files are the equivalent of the <a href=http://wiki.ros.org/rosdep/rosdep.yaml>rosdep.yaml</a> and translate ROS dependencies into conda package names (or in the case of the dependencies listed in <code>packages-ignore.yaml</code> the dependencies are ignored by specifying an empty list).</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.51198bba.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src=javascripts/tables.js></script> </body> </html>